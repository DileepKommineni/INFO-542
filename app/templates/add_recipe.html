{% extends 'base.html' %}

{% block title %}Add Recipe{% endblock %}

{% block custom_css %}
<link href="../static/css/add_recipe.css" rel="stylesheet">{% endblock %}

{% block content %}
<br>
<div class="add_recipe_box">
    <h2 class="text-center text-info">Add Recipe</h2>
    <div class="avatar-preview">
        <img id="avatar-preview-img" src="#" alt="Avatar Preview"
            style="display: none; max-width: 100px; max-height: 100px;">
    </div>
    <form method="POST" action="{{ url_for('add_recipe') }}" enctype="multipart/form-data">
        <div class="mb-3">
            <label for="avatar" class="form-label">Upload Avatar</label>
            <input type="file" class="form-control" id="avatar" name="image" accept="image/*"
                onchange="previewAvatar(event)" required>
        </div>
        <div class="mb-3">
            <label for="title" class="form-label">Title</label>
            <input type="text" class="form-control" id="title" name="title" required>
        </div>
        <div class="mb-3">
            <label for="cuisine" class="form-label">Cuisine</label>
            <input type="text" class="form-control" id="cuisine" name="cuisine" required>
        </div>
        <div class="mb-3">
            <label for="difficulty" class="form-label">Difficulty</label>
            <input type="text" class="form-control" id="difficulty" name="difficulty" required>
        </div>
        <div class="mb-3">
            <label for="prep_time" class="form-label">Prep Time (minutes)</label>
            <input type="number" class="form-control" id="prep_time" name="prep_time" required>
        </div>
        <div class="mb-3">
            <label for="cook_time" class="form-label">Cook Time (minutes)</label>
            <input type="number" class="form-control" id="cook_time" name="cook_time" required>
        </div>
        <div class="mb-3">
            <label for="ingredients" class="form-label">Ingredients</label>
            <textarea class="form-control" id="ingredients" name="ingredients" rows="4" required></textarea>
        </div>
        <div class="mb-3">
            <label for="preparation_steps" class="form-label">Preparation Steps</label>
            <textarea class="form-control" id="preparation_steps" name="preparation_steps" rows="6" required></textarea>
        </div>
        <button type="submit" class="btn btn-primary btn-lg">Add Recipe</button>
    </form>
</div>
<br>

<!-- </div> -->
{% endblock %}

{% block js_script %}
<script>
    function previewAvatar(event) {
        const avatarPreview = document.getElementById('avatar-preview-img');
        avatarPreview.style.display = 'block';

        const file = event.target.files[0];
        const reader = new FileReader();

        reader.onload = function (event) {
            avatarPreview.src = event.target.result;
        };

        reader.readAsDataURL(file);
    }
</script>
{% endblock %}